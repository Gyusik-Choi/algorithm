# 백준

## 3665

#### B_3665.py

문제를 이해하는 것부터 어려웠다. 이번 문제에서 주의할 점은 등수가 바뀐 쌍을 제외한 나머지 팀 사이의 상대적인 등수가 바뀌면 안된다.

<br>

예를 들어 아래와 같은 입력이 주어졌다고 했을 때, 1과 2 그리고 3과 4의 상대적인 등수는 바뀌더라도 1과 3 그리고 2와 4 간의 상대적인 등수가 바뀌면 안 된다.

```
1
4
1 2 3 4
2
1 2
3 4
```

<br>

#### B_3665_2.py

위상 정렬을 활용하는 문제다.

작년 등수 정보가 있고, 올해 바뀐 등수 정보가 있기 때문에 정확한 순위를 알지 못하는 경우는 없다. ? 는 나올 수 없다.

<br>

등수가 바뀐 정보에 대해서 우선 순위와 차수 정보를 업데이트 하기 위해서 bfs 를 활용했다. 작년 등수 정보를 저장할 때, 모든 등수 정보를 다 넣었다. 

1 2 3 4 가 작년 등수로 주어졌다고 하면 우선 순위와 차수 정보를 담는 배열에

1 -> 2, 

2 -> 3, 

3 -> 4 

만 넣지 않고

1 -> 2

1 -> 3

1 -> 4

2 -> 3

2 -> 4

3 -> 4

이렇게 모두 넣어준다.

<br>

이렇게 넣어줘야 등수가 바뀐 정보에 대해서 우선순위와 차수를 업데이트 할 수 있다.

<br>

### B_3665_4.py

처음에 level 만 가지고 풀이를 하려 했다. 순위가 변동이 되면 서로의 level 값을 바꾸려 했다. level 값을 서로 바꿔줄 때 문제점은 순위가 바뀐다고 했을 때 순위가 바뀌지 않는 정점들 간의 선후 관계는 변함이 없어야 한다.

```
1
5 4 3 2 1
1
2 4
```

예를 들어 작년 순위가 5 4 3 2 1 이고 상대적인 등수가 바뀐 팀이 2 4 라고 할때 (5, 2), (3, 2), (1, 2), (5, 4), (4, 3), (4, 1) 해당 팀들 간의 선후 관계가 변함 없어야 한다.

level 만 가지고 풀이를 하면 5 4 3 2 1 순위에서 2 4 의 등수를 바꾸는게 가능하게 풀이가 된다. 그러나 실제로는 사이클이 생기기 때문에 IMPOSSIBLE 이 정답이다.

2와 4를 바꾸면 5 2 3 4 1 이 되는데 이럴 경우 (2, 3), (3, 4) 의 상대적 순위가 바뀌었다. 3은 4보다 상대적 순위가 낮고 3은 2보다 상대적 순위가 높아야 하는데 이것을 충족하지 못한다. 3이 4보다 상대적 순위가 낮아야 해서 5 2 4 3 1 이 되는데
3이 2보다 상대적 순위가 높아야 해서 5 4 3 2 1 이 되면 원래대로 되고 이것의 무한 반복이 돼서 사이클이 생긴다.

그래서 level 만으로는 선후 관계를 제대로 파악할 수 없다. 5 4 3 2 1 에서 5와 1의 절대적 순위 차이는 진입 차수로 알 수 있는 것이고 5와 1의 둘 사이 자체의 관계는 5가 1보다 상대적 순위가 높다는 것 뿐이다.

<br>

<참고>

https://deque.tistory.com/62

https://zoosso.tistory.com/369



