# LeetCode

## [393. UTF-8 Validation](https://leetcode.com/problems/utf-8-validation/)

### Python

주어진 숫자 리스트를 이진수로 변환 했을 때 올바른 UTF-8 인코딩 양식인지 판단하는 문제다.

이 문제에서 주어진 첫번째 예시를 이해하기 어려웠다.

<br>

```
[197, 130, 1]
```

첫번째 예시의 data 는 위와 같다.

<br>

```
11000101 10000010 00000001
```

이진수로 변환하면 다음과 같다. 참고로 각 data 요소는 0부터 255까지라 최대 8비트, 즉 1바이트로 나타낼 수 있다.

<br>

UTF-8 인코딩 형식에 따르면 첫 바이트의 상위 비트가 110이면 2바이트로 저장하게 된다. 그리고 첫번째 바이트를 제외하고 나머지 한 바이트는 10으로 시작해야 한다.

두번째 바이트까지는 각각 110, 10이라 올바른 UTF-8 인코딩 형식을 따른다. 그런데 마지막 세번째 바이트는 0으로 시작하는데 이를 어떻게 받아들여야 할지 몰랐다. 세번째 바이트 자체가 나오면 안 되는게 맞지 않나 생각을 했었다.

결론적으로는 각각을 분리해서 봐야한다. 첫번째와 두번째 바이트는 첫번째 바이트의 상위 비트인 110에 따라서 두번째 바이트까지 같이 봐야한다. 세번째 바이트는 이와 별개로 따로 올바른지 판단하면 된다.

<br>

data 의 모든 정수들을 이진수로 변환한 뒤 이를 하나의 UTF-8 인코딩 값으로 판단해야 한다고 오해한게 이러한 혼동의 원인이 됐다. 사실 이러한 생각은 애초에 문제의 제약조건을 제대로 보았다면 뭔가 이상하다고 먼저 생각했어야 했다.

data 의 최대 길이는 20000이다. 8비트 20000개는 UTF-8 이 나타낼 수 있는 범위를 한참 벗어난다. UTF-8 인코딩은 최대 6바이트를 사용할 수 있으나 5, 6바이트는 아직 사용하지 않고 4바이트까지만 사용하고 있다.

<br>

### Java

이 문제를 통해서 유니코드, UTF-8, 인코딩에 대해서 학습할 수 있었다.

data 의 숫자들이 UTF-8 인코딩 방식으로 표현할 수 있는 숫자들인지 판단하는 문제다.

data 의 현재 숫자를 이진수로 변환했을 때 4바이트, 3바이트, 2바이트, 1바이트 중에서 몇 바이트에 해당하는 숫자인지에 따라서 추가로 확인해야할 사항들이 나뉜다. 

현재 숫자를 이진수로 변환했을 때 UTF-8 인코딩의 몇 바이트로 표현해야할 숫자인지에 따라서 추가로 확인해야할 숫자가 몇개고 해당 숫자를 이진수로 변환했을 때 최상위 2비트가 10이 맞는지가 결정된다.

data 의 모든 숫자가 하나의 UTF-8 인코딩으로 표현되는게 아니다. UTF-8 인코딩은 최대 6바이트까지 가능하나 실제로는 4바이트까지만 사용하고 있어서 data 의 최대 길이가 20000 이라 data 를 하나의 인코딩으로 표현할 수 없다. 

현재 인덱스의 숫자가 총 몇 바이트로 표현해야 하는 숫자인지 파악해서 현재 인덱스와 나머지 인덱스 숫자들을 확인한 후 올바른 UTF-8 인코딩으로 표현된 숫자라면 이후 인덱스로 넘어간다.

<br>

<참고>

파이썬 알고리즘 인터뷰

https://namu.wiki/w/%EC%9D%B8%EC%BD%94%EB%94%A9

https://namu.wiki/w/%EC%95%84%EC%8A%A4%ED%82%A4%20%EC%BD%94%EB%93%9C

https://namu.wiki/w/%EC%9C%A0%EB%8B%88%EC%BD%94%EB%93%9C

https://namu.wiki/w/UTF-8

자바 알고리즘 인터뷰