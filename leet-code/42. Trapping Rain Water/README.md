# LeetCode

## 42. Trapping Rain Water

### 42_trapping_rain_water.py

투포인터를 활용했다. 왼쪽보다 오른쪽이 크거나 같으면 왼쪽에서 오른쪽으로 한칸 이동한다. 반대의 경우는 오른쪽에서 왼쪽으로 한칸 이동한다.

물이 쌓이려면 왼쪽과 오른쪽 보다 낮은 지점이 사이에 필요하다. 낮은 지점이 있으면 왼쪽과 오른쪽 둘 중 더 낮은 위치까지 물이 쌓일 수 있다. 

만약 왼쪽과 오른쪽 사이에 왼쪽과 오른쪽 보다 낮은 지점이 없거나 왼쪽과 오른쪽이 바로 붙어 있으면 왼쪽부터 오른쪽까지 범위에서는 물이 쌓일 수 없다.

앞서 왼쪽보다 오른쪽이 크거나 같을 경우 왼쪽에서 오른쪽으로 한칸 이동한다고 했다. 이 경우 물이 쌓일 수 있는 최대 높이는 왼쪽의 높이까지다. 왼쪽과 오른쪽이 같으면 같으므로 왼쪽, 오른쪽 관계 없이 최대 높이라 왼쪽 높이까지 가능하고 왼쪽 보다 오른쪽이 크면 오른쪽 높이까진 물이 쌓일 수 없고 왼쪽 높이 까지만 쌓일 수 있어서 왼쪽 높이까지 가능하다.

오른쪽으로 한칸 이동할때 기존 왼쪽 최대 값에서 현재 높이를 뺀 값이 현재까지 물이 쌓인 높이다. 왼쪽 보다 현재 지점이 낮으면 오른쪽 보다 낮은 것은 보장이 되므로 왼쪽에서 현재 지점을 뺀다. 왼쪽과 현재 지점이 같거나 현재 지점이 더 높은 경우는 물이 쌓일 수 없다. 현재 지점까지의 최대값을 현재값과 빼기 때문에 설령 왼쪽 보다 현재 지점이 더 높다고 하더라도 현재 지점을 구할때는 이미 현재 지점으로 최대값을 변경한 상태라 음수 값이 나오지 않는다.

<br>

### TrappingWater42_2.java

교재의 풀이를 참고했다. 스택을 활용하는 풀이인데 이해하기 어려웠다.

for 문을 돌면서 스택이 비어있지 않으면서 현재 요소의 높이가 스택 최상단 요소의 높이보다 높은지 검사한다.

만약에 현재 요소의 높이가 스택 최상단 요소의 높이보다 높으면 스택에서 요소를 꺼낸다.

현재 요소와 스택의 첫번째(최상단) 요소와의 차이를 구하는데 현재 요소와 스택의 두번째(최상단 다음의 요소) 요소 중 더 낮은 높이에서 최상단 요소의 높이를 뺀 값이 물의 높이 차이가 된다. 물은 비교 대상 중 더 낮은 높이만큼만 쌓을 수 있다.

[2, 1, 3] 이 입력으로 주어졌다고 가정하면 1에 물을 쌓을 수 있다. 

2, 3 중에서 작은 2까지만 물을 쌓을 수 있다. 쌓을 수 있는 물의 양은 2에서 1을 뺀 1이다.

[2, 1, 3] 을 for 문을 돌면 for 문이 3에 왔을 때 (스택에는 인덱스를 넣기 때문에) 스택의 첫번째는 1, 스택의 두번째는 0이 있다. 스택이 비어있지 않고 스택의 첫번째 요소의 높이는 1이고 1보다 3이 더 크다.

스택에서 첫번째 요소인 1을 꺼낸다.

1에 물을 얼마나 채울 수 있는지 알아내기 위해 스택의 두번째 요소(두번째 요소였으나 스택에서 첫번째 요소를 꺼냈기 때문에 이제 두번째 요소가 새롭게 첫번째 요소가 됐다)가 필요하다. 

두번째 요소와 for 문의 요소 중 더 낮은 높이까지만 물을 채울 수 있다. 그런데 둘 중 더 낮은 높이가 첫번째 요소의 높이와 같으면 채울 수 있는 물이 없다. 

예시로 든 입력의 경우 첫번째 요소의 높이가 1이고, 두번째 요소와 for 문의 요소 중 더 낮은 높이가 2라서 물을 채울 수 있다.

<br>

여기서 또 하나 고려할 게 있다. 거리를 고려해야 한다.

[2, 1, 0, 1, 3] 이 입력으로 주어졌다고 가정한다.

for 문을 돌면서 2, 1, 0 일때는 while 문을 만족하지 못하고 스택에 인덱스를 쌓는다. 

for 문이 (두번째) 1에 왔을 때 while 문을 만족한다.

스택의 첫번째는 0, 두번째는 1이 있다. 

스택의 첫번째인 0을 꺼낸다. 

스택의 두번째인 1과 for 문의 요소인 1은 높이가 갖다. 1에서 최상단의 0을 뺀 1이 물을 채울 수 있는 높이다. 

여기서 for 문의 요소의 인덱스와 두번째 요소의 인덱스 사이의 거리는 1이다. 물론 인덱스를 뺄셈하면 2가 맞으나 여기서는 두번째 요소와 for 문의 요소를 제외한 나머지 거리가 얼마인지를 판단해야 해서 1이다. 

여기까지는 거리가 1이라 크게 고려할게 없어보이지만 다음 for 문의 요소인 3에서 거리가 중요하다. 

for 문의 요소가 3일 때 스택의 첫번째는 1(인덱스 3), 두번째는 1(인덱스 1), 세번째는 2(인덱스 0)가 있다. 

스택의 첫번째인 1(인덱스 3)을 꺼낸다.

스택의 두번째인 1(인덱스 1)과 for 문의 요소 높이인 3은 1이 높이가 더 낮다. 여기서 1은 스택에서 꺼낸 1과 물의 높이가 같아서 채울 수 있는 물의 높이가 0이다.

스택의 첫번째는 스택에서 꺼냈기 때문에 이제 스택의 첫번째는 1(인덱스 1), 두번째는 2(인덱스 0)가 있다. 스택의 두번째인 2와 for 문의 요소인 3중 2가 더 낮다. 2에서 스택의 첫번째인 1을 뺀 1이 물을 채울 수 있는 높이다. 스택의 두번째 요소와 for 문의 현재 요소 사이의 거리는 3이다. 물을 채울 수 있는 높이 1과 거리 3을 곱해서 3만큼 채울 수 있다.

<br>

물의 높이 차이를 현재 요소와 스택 두번째 요소와의 거리 값과 곱한 값을 누적해서 더한다.

<br>

<참고>

파이썬 알고리즘 인터뷰

자바 알고리즘 인터뷰

