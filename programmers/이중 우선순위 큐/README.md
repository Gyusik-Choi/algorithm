# 프로그래머스

## 이중 우선순위 큐

### Java

#### Programmers42628

쉽지 않은 문제였다.

우선순위 큐와 해시맵을 활용했다.

최대값 혹은 최소값만 구하는 문제였다면 보다 쉽게 풀이할 수 있었겠지만 최대값과 최소값을 함께 구해야 해서 어려웠다. 우선순위 큐는 둘을 동시에 구하는게 아닌 둘 중 하나를 구하는데 최적화된 자료구조다.

하나의 우선순위 큐로 둘을 동시에 구할 수 없다고 판단해서 최대값, 최소값을 구하는 큐를 각각 두었다. 문제는 하나의 값이 두 큐에 들어가기 때문에 정합성을 유지할 수 있어야 했다.

큐에 넣을 때 두 큐에 모두 넣기 때문에 하나의 값이 두군데로 들어가게 된다. 최대값이나 최소값을 제거할 때는 하나의 큐에서만 제거된다. 만약에 최대값을 제거했다면 최소값을 구하는 큐에는 해당 데이터가 남아있게 되는데 이 데이터가 유효하지 않은 데이터임을 판단하기 위해 해시맵을 통해 데이터의 갯수를 관리했다.

해시맵에 insert 되는 요소의 갯수를 구해서 큐에서 제거될 때마다 1씩 뺐다. 만약에 한 해시맵 키의 값이 0이라면 이는 큐에서 모두 빠져나간 상태기 때문에 둘 중 하나의 큐에 있더라도 이는 유효하지 않은 데이터다.

최대값이나 최소값을 제거할 때 꺼내려는 요소가 해시맵에서 값이 0이면 다른 큐에서 이미 뺀 요소라 유효하지 않은 데이터기 때문에 큐에서 제거한다. 그리고나서 남은 요소를 큐에서 꺼낸다. 이때 꺼낸 요소는 해시맵에서 값을 1 뺀다.

주어진 opertions 를 모두 처리한 뒤 정답을 구하기 전에 큐에 유효하지 않은 데이터가 남아있을 수 있어서 큐를 다시 한번 검사한다. 예를 들어 4, 3, 2, 1 을 큐에 넣고 최대값 2번, 최소값 2번을 제거하면 두 큐에는 2, 1 그리고 4, 3 이 각각 남아있다. 이때 해시맵은 4개의 키 모두 0이기 때문에 큐에 남아있는 값에서 그대로 정답을 구하면 안 된다. 

주어진 opertions 를 모두 처리한 뒤 큐를 다시 한번 검사해서 유효하지 않은 데이터를 제거한 뒤 큐가 비었다면 [0, 0] 을 리턴하고 큐가 비어있지 않으면 각각의 큐에서 최대값, 최소값을 꺼내서 배열로 묶어 리턴한다.

<br>

#### Programmers42628_2

교재의 풀이를 참고했다.

교재에서는 Programmers42628 와 달리 해시맵을 사용하지 않고 두개의 우선순위 큐만으로 풀이한다. 우선순위 큐에서 제공하는 poll, remove 메소드를 사용한다.

최대값, 최소값을 구할때는 최대힙, 최소힙에서 poll 메소드를 사용해서 꺼내고, 꺼낸 요소를 다른 힙에서 제거하기 위해 remove 메소드를 사용한다.

<br>

### Kotlin

#### Programmers42628

어려운 문제였다.

Java 의 Programmers42628 와 동일한 방식으로 풀이했다.

교재와 달리 우선순위 큐만 사용하지 않고 해시맵을 함께 사용했다. 우선순위 큐만 사용하면 보다 편하게 풀이할 수 있다. Queue 인터페이스의 remove 메소드를 활용할 수 있기 때문이다.

그러나 이를 사용하지 않고 우선순위 큐의 연산만 가지고 풀이하기 위해 해시맵을 사용했다. 즉, 큐의 최상단 값을 꺼내는 것 외에 중간에 있는 값을 꺼내는 연산을 사용하지 않고자 했다.

최대힙, 최소힙 두개로 나눠서 최대값을 구할 때는 최대힙에서 꺼내고 최소값을 구할 때는 최소힙에서 꺼낸다. 이때 양쪽에서 꺼내지 않고 한쪽에서만 꺼내기 때문에 실제로는 큐가 비어있는게 맞는 상황일 수 있다. 

이를 해결하기 위해 큐에 요소를 넣을 때는 최대힙, 최소힙 모두 넣고 해시맵에서 해당 요소에 대한 갯수를 구한다. 그리고 큐에서 꺼낼 때는 해시맵에서 큐의 최상단에 있는 값이 0인지 판단해서 0이라면 0이 아닌게 나올 때까지 큐에서 모두 꺼낸 후 해시맵에서 0이 아닌 값을 꺼낸다.

<br>

#### Programmers42628_2

교재의 풀이를 참고하여 Java 의 Programmers42628_2 와 동일한 방식으로 풀이했다.

<br>

<참고>

자바 알고리즘 인터뷰

